p8105\_hw2\_sl4657
================

# Problem 1

## Use Mr.Trash.Wheel sheet

``` r
library(tidyverse)
```

    ## ── Attaching packages ───────────────────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ──────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)
library(dplyr)
mtw_data = 
  read_excel(
    "data files/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet=1) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster))%>% 
  select(-15) %>% 
  mutate(sports_balls = round(sports_balls, digits = 0)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

    ## New names:
    ## * `` -> ...15

``` r
mtw_data
```

    ## # A tibble: 285 x 14
    ##    dumpster month  year date                weight_tons volume_cubic_ya…
    ##       <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ##  1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ##  2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ##  3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ##  4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ##  5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ##  6        6 May    2014 2014-05-20 00:00:00        2.71               13
    ##  7        7 May    2014 2014-05-21 00:00:00        1.91                8
    ##  8        8 May    2014 2014-05-28 00:00:00        3.7                16
    ##  9        9 June   2014 2014-06-05 00:00:00        2.52               14
    ## 10       10 June   2014 2014-06-11 00:00:00        3.76               18
    ## # … with 275 more rows, and 8 more variables: plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>

``` r
p8_data = 
  readxl::read_excel(
    "./data files/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet=3,range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year= "2018")
p8_data
```

    ## # A tibble: 7 x 3
    ##   month total year 
    ##   <dbl> <dbl> <chr>
    ## 1     1  0.96 2018 
    ## 2     2  5.3  2018 
    ## 3     3  2.18 2018 
    ## 4     4  3.2  2018 
    ## 5     5  9.27 2018 
    ## 6     6  0.2  2018 
    ## 7     7  2.39 2018

``` r
p7_data = 
  readxl::read_excel(
    "./data files/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet=4,range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  mutate(year= "2017")
p7_data
```

    ## # A tibble: 12 x 3
    ##    month total year 
    ##    <dbl> <dbl> <chr>
    ##  1     1  2.34 2017 
    ##  2     2  1.46 2017 
    ##  3     3  3.57 2017 
    ##  4     4  3.99 2017 
    ##  5     5  5.64 2017 
    ##  6     6  1.4  2017 
    ##  7     7  7.09 2017 
    ##  8     8  4.44 2017 
    ##  9     9  1.95 2017 
    ## 10    10  0    2017 
    ## 11    11  0.11 2017 
    ## 12    12  0.94 2017

``` r
p78_data=
  bind_rows(p7_data, p8_data) %>% 
  mutate(month = month.abb[month]) %>% 
  select(year, everything())
p78_data
```

    ## # A tibble: 19 x 3
    ##    year  month total
    ##    <chr> <chr> <dbl>
    ##  1 2017  Jan    2.34
    ##  2 2017  Feb    1.46
    ##  3 2017  Mar    3.57
    ##  4 2017  Apr    3.99
    ##  5 2017  May    5.64
    ##  6 2017  Jun    1.4 
    ##  7 2017  Jul    7.09
    ##  8 2017  Aug    4.44
    ##  9 2017  Sep    1.95
    ## 10 2017  Oct    0   
    ## 11 2017  Nov    0.11
    ## 12 2017  Dec    0.94
    ## 13 2018  Jan    0.96
    ## 14 2018  Feb    5.3 
    ## 15 2018  Mar    2.18
    ## 16 2018  Apr    3.2 
    ## 17 2018  May    9.27
    ## 18 2018  Jun    0.2 
    ## 19 2018  Jul    2.39

The number of observations in 2018 precipitation dataset is 7, in 2017
precipitation dataset is 12, key variables are year, month. The total
precipitation in 2018 is 23.5, the median number of sports balls in a
dumpster in 2017 is 8.

# Problem 2

## Use the FiveThirtyEight data

``` r
pols_data = 
  read_csv(file = "./data files/pols-month.csv") %>% 
  separate(col = mon, into = c("year", "month", "day"), "-") %>%
  mutate(
    month = as.numeric(month),
    month = month.abb[month])%>% 
  mutate(president = recode(prez_gop, `0` ="dem", `1` = "gop_1", `2`= "gop_2")) %>% 
  select(-day,- prez_gop, -prez_dem)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
pols_data
```

    ## # A tibble: 822 x 9
    ##    year  month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <chr> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1 1947  Jan        23      51     253      23      45     198 dem      
    ##  2 1947  Feb        23      51     253      23      45     198 dem      
    ##  3 1947  Mar        23      51     253      23      45     198 dem      
    ##  4 1947  Apr        23      51     253      23      45     198 dem      
    ##  5 1947  May        23      51     253      23      45     198 dem      
    ##  6 1947  Jun        23      51     253      23      45     198 dem      
    ##  7 1947  Jul        23      51     253      23      45     198 dem      
    ##  8 1947  Aug        23      51     253      23      45     198 dem      
    ##  9 1947  Sep        23      51     253      23      45     198 dem      
    ## 10 1947  Oct        23      51     253      23      45     198 dem      
    ## # … with 812 more rows

``` r
snp_data =
  read_csv(file = "./data files/snp.csv") %>% 
  separate(col = date, into = c("month", "day", "year"), "/") %>% 
  mutate(
    month = as.numeric(month),
    month = month.abb[month])%>% 
  arrange(year, month) %>% 
  select(year, month, everything()) %>% 
  select(-day)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snp_data
```

    ## # A tibble: 787 x 3
    ##    year  month close
    ##    <chr> <chr> <dbl>
    ##  1 1950  Apr    18.0
    ##  2 1950  Aug    18.4
    ##  3 1950  Dec    20.4
    ##  4 1950  Feb    17.2
    ##  5 1950  Jan    17.0
    ##  6 1950  Jul    17.8
    ##  7 1950  Jun    17.7
    ##  8 1950  Mar    17.3
    ##  9 1950  May    18.8
    ## 10 1950  Nov    19.5
    ## # … with 777 more rows

``` r
unem_data =
  read_csv(file = "./data files/unemployment.csv") %>% 
  pivot_longer(
    Jan: Dec,
    names_to = "month",
    values_to = "unem_perc"
  ) %>% 
  janitor::clean_names()
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
unem_data
```

    ## # A tibble: 816 x 3
    ##     year month unem_perc
    ##    <dbl> <chr>     <dbl>
    ##  1  1948 Jan         3.4
    ##  2  1948 Feb         3.8
    ##  3  1948 Mar         4  
    ##  4  1948 Apr         3.9
    ##  5  1948 May         3.5
    ##  6  1948 Jun         3.6
    ##  7  1948 Jul         3.6
    ##  8  1948 Aug         3.9
    ##  9  1948 Sep         3.8
    ## 10  1948 Oct         3.7
    ## # … with 806 more rows

``` r
s_p = 
  inner_join(snp_data, pols_data, by= c("year", "month")) %>% 
  mutate(year= as.double(year))

s_p_u=
  full_join(s_p, unem_data, by= c("year", "month"))
s_p_u
```

    ## # A tibble: 816 x 11
    ##     year month close gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <dbl> <chr> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1950 Apr    18.0      18      44     177      29      57     269
    ##  2  1950 Aug    18.4      18      44     177      29      57     269
    ##  3  1950 Dec    20.4      18      44     177      29      57     269
    ##  4  1950 Feb    17.2      18      44     177      29      57     269
    ##  5  1950 Jan    17.0      18      44     177      29      57     269
    ##  6  1950 Jul    17.8      18      44     177      29      57     269
    ##  7  1950 Jun    17.7      18      44     177      29      57     269
    ##  8  1950 Mar    17.3      18      44     177      29      57     269
    ##  9  1950 May    18.8      18      44     177      29      57     269
    ## 10  1950 Nov    19.5      18      44     177      29      57     269
    ## # … with 806 more rows, and 2 more variables: president <chr>,
    ## #   unem_perc <dbl>

In the pols\_data, dimension is 822, 9, range of years is 1947, 2015,
key variables are year, month. In the snp\_data, dimension is 787, 3,
range of years is 1950, 2015, key variables are year, month. In the
unem\_data, dimension is 816, 3, range of years is 1948, 2015, key
variables are year, month.

# Problem 3

## Use data on Popularity of baby names

``` r
pbn_data=
  read_csv(file= "./data files/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(gender= str_to_lower(gender),
         ethnicity= str_to_lower(ethnicity),
         childs_first_name = str_to_title(childs_first_name)) %>% 
  distinct(year_of_birth, gender, ethnicity, childs_first_name, .keep_all = TRUE)
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
pbn_data
```

    ## # A tibble: 12,180 x 6
    ##    year_of_birth gender ethnicity              childs_first_na… count  rank
    ##            <dbl> <chr>  <chr>                  <chr>            <dbl> <dbl>
    ##  1          2016 female asian and pacific isl… Olivia             172     1
    ##  2          2016 female asian and pacific isl… Chloe              112     2
    ##  3          2016 female asian and pacific isl… Sophia             104     3
    ##  4          2016 female asian and pacific isl… Emily               99     4
    ##  5          2016 female asian and pacific isl… Emma                99     4
    ##  6          2016 female asian and pacific isl… Mia                 79     5
    ##  7          2016 female asian and pacific isl… Charlotte           59     6
    ##  8          2016 female asian and pacific isl… Sarah               57     7
    ##  9          2016 female asian and pacific isl… Isabella            56     8
    ## 10          2016 female asian and pacific isl… Hannah              56     8
    ## # … with 12,170 more rows

``` r
oli_rank=
  pbn_data %>%
  filter(childs_first_name %in% "Olivia")
oli_rank
```

    ## # A tibble: 24 x 6
    ##    year_of_birth gender ethnicity              childs_first_na… count  rank
    ##            <dbl> <chr>  <chr>                  <chr>            <dbl> <dbl>
    ##  1          2016 female asian and pacific isl… Olivia             172     1
    ##  2          2016 female black non hispanic     Olivia              49     8
    ##  3          2016 female hispanic               Olivia             108    13
    ##  4          2016 female white non hispanic     Olivia             230     1
    ##  5          2015 female asian and pacific isl… Olivia             188     1
    ##  6          2015 female black non hispanic     Olivia              82     4
    ##  7          2015 female hispanic               Olivia              94    16
    ##  8          2015 female white non hispanic     Olivia             225     1
    ##  9          2014 female asian and pacific isl… Olivia             141     1
    ## 10          2014 female black non hispanic     Olivia              52     8
    ## # … with 14 more rows

``` r
eth_rank=
  pbn_data %>% 
  filter(childs_first_name %in% "Ethan")
eth_rank
```

    ## # A tibble: 24 x 6
    ##    year_of_birth gender ethnicity              childs_first_na… count  rank
    ##            <dbl> <chr>  <chr>                  <chr>            <dbl> <dbl>
    ##  1          2016 male   asian and pacific isl… Ethan              193     1
    ##  2          2016 male   black non hispanic     Ethan              107     5
    ##  3          2016 male   hispanic               Ethan              250     7
    ##  4          2016 male   white non hispanic     Ethan              133    20
    ##  5          2015 male   asian and pacific isl… Ethan              172     2
    ##  6          2015 male   black non hispanic     Ethan              111     5
    ##  7          2015 male   hispanic               Ethan              332     3
    ##  8          2015 male   white non hispanic     Ethan              138    19
    ##  9          2014 male   asian and pacific isl… Ethan              179     2
    ## 10          2014 male   black non hispanic     Ethan              138     1
    ## # … with 14 more rows
